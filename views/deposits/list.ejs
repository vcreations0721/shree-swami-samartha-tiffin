<%- include('../partials/header', { title: 'Deposits' }) %>

<div class="d-flex justify-content-between align-items-center mb-3">
  <h3>Customer Deposits</h3>
  <a href="/deposits/add" class="btn btn-primary">➕ Add Deposit</a>
</div>

<table class="table table-bordered table-striped">
  <thead class="table-dark">
    <tr>
      <th>Date</th>
      <th>Customer</th>
      <th>Amount (₹)</th>
      <th>Mode</th>
      <th>Status</th>
      <th>Action</th>
    </tr>
  </thead>
  <tbody>
    <% deposits.forEach(d => { %>
      <tr>
        <td><%= d.date.toDateString() %></td>
        <td><%= d.customer?.name %></td>
        <td><strong><%= d.amount %></strong></td>
        <td><%= d.mode %></td>
        <td>
          <span class="badge <%= d.refunded ? 'bg-success' : 'bg-warning' %>">
            <%= d.refunded ? 'Refunded' : 'Holding' %>
          </span>
        </td>
        <td>
          <a href="/deposits/refund/<%= d._id %>" class="btn btn-sm btn-outline-secondary">
            <%= d.refunded ? 'Undo Refund' : 'Mark Refunded' %>
          </a>
        </td>
      </tr>
    <% }) %>
  </tbody>
</table>

<%- include('../partials/footer') %>
